#!/usr/bin/env node
"use strict";var n=require("dotenv"),s=require("dotenv-expand"),e=(0,s.expand)((0,n.config)()).parsed,i={php:{version:e?.BROWSER_PHP_VERSION!=null?e?.BROWSER_PHP_VERSION:"8.2"},composer:{version:e?.BROWSER_PHP_COMPOSER_VERSION??"2.7.1",path:e?.BROWSER_PHP_COMPOSER_PATH??"vendor/bin",name:e?.BROWSER_PHP_COMPOSER_NAME??"composer"},server:{host:e?.BROWSER_PHP_HOST??"http://localhost",port:e?.BROWSER_PHP_PORT??"2222",path:e?.BROWSER_PHP_PATH??"public",debug:e?.BROWSER_PHP_DEBUG!=null&&e?.BROWSER_PHP_DEBUG!="false"}};var P=require("@php-wasm/node");P.NodePHP.load(i.php.version).then(r=>{r.useHostFilesystem();let o=process.argv.slice(2);o.includes("--disable-functions")&&(o.splice(o.indexOf("--disable-functions"),1),o=["-d","disable_functions=proc_open,popen,curl_exec,curl_multi_exec",...o]),r.cli(["php",...o]).catch(t=>{throw t}).finally(()=>process.exit(0))});
